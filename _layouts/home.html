---
# Custom home layout overriding Minima's home.html
#+ This layout injects the page content first (index.md) and then renders the
# built-in Posts list, but extends the post listing to display tags next to the date.
layout: base
---

{%- comment -%} This file is a minimal override of Minima's `home.html` to keep
the theme behaviour but add tags next to the date in the Posts listing. It uses
the site's `posts` collection and replicates the typical structure Minima
expects. {%- endcomment -%}

<main id="site-main" class="site-main">
  <header class="page-head">{{ content }}</header>

  {%- assign posts = site.posts | where_exp: "post","post.draft != true" -%} {%-
  if posts and posts.size > 0 -%}
  <section class="posts-list">
    <h2>{{ page.list_title | default: "Posts" }}</h2>
    <ol class="posts">
      {%- for post in posts -%}
      <li class="post-item">
        <time class="post-date"
          >{{ post.date | date: site.minima.date_format | default: "%b %-d, %Y"
          }}</time
        >
        {%- if post.tags and post.tags.size > 0 -%}
        <span class="post-tags"
          >( {%- for tag in post.tags -%}
          <a
            href="{{ '/tag/' | append: tag | slugify | append: '/' | relative_url }}"
            rel="tag"
            >{{ tag }}</a
          >{% unless forloop.last %}, {% endunless %} {%- endfor -%} )</span
        >
        > {%- endif -%}
        <a class="post-title" href="{{ post.url | relative_url }}"
          >{{ post.title }}</a
        >
        {%- if site.minima.show_excerpts -%}
        <div class="post-excerpt">{{ post.excerpt }}</div>
        {%- endif -%}
      </li>
      {%- endfor -%}
    </ol>
  </section>
  {%- endif -%}
</main>
